{
  "name": "macide-core",
  "displayName": "Macide Core",
  "description": "Multi-account GitHub Copilot management, account rotation, and enhanced Git tooling for Macide.",
  "version": "1.0.0",
  "publisher": "Macide",
  "license": "MIT",
  "private": true,
  "engines": {
    "vscode": "*"
  },
  "categories": ["Other"],
  "activationEvents": ["onStartupFinished", "onAuthenticationRequest:github"],
  "main": "./out/extension.js",
  "contributes": {
    "themes": [
      {
        "label": "Obsidian Flow",
        "uiTheme": "vs-dark",
        "path": "./out/theme/obsidianFlow.json"
      }
    ],
    "views": {
      "explorer": [
        {
          "id": "macide.contextPinsView",
          "name": "AI Context Pins",
          "contextualTitle": "Macide Context Pins",
          "icon": "$(pin)",
          "visibility": "collapsed",
          "when": "true"
        }
      ],
      "panel": [
        {
          "type": "webview",
          "id": "macide.toastView",
          "name": "Macide Notifications",
          "visibility": "collapsed"
        }
      ]
    },
    "commands": [
      {
        "command": "macide.addAccount",
        "title": "Macide: Add GitHub Account",
        "category": "Macide"
      },
      {
        "command": "macide.openAccountPanel",
        "title": "Macide: Open Account Panel",
        "category": "Macide"
      },
      {
        "command": "macide.switchAccount",
        "title": "Macide: Switch Account",
        "category": "Macide"
      },
      {
        "command": "macide.showAccountStatus",
        "title": "Macide: Show Account Status",
        "category": "Macide"
      },
      {
        "command": "macide.enterFlowMode",
        "title": "Macide: Enter Flow Mode",
        "category": "Macide"
      },
      {
        "command": "macide.toggleFlowMode",
        "title": "Macide: Toggle Flow Mode",
        "category": "Macide"
      },
      {
        "command": "macide.openBranchSwitcher",
        "title": "Macide: Switch Branch",
        "category": "Macide"
      },
      {
        "command": "macide._exitFlowModeEscape",
        "title": "Macide: Exit Flow Mode (Escape)",
        "category": "Macide"
      },
      {
        "command": "macide.openGitHistory",
        "title": "Macide: Open Git History",
        "category": "Macide"
      },
      {
        "command": "macide.generateCommitMessage",
        "title": "Macide: Generate AI Commit Message",
        "category": "Macide"
      },
      {
        "command": "macide.removeAccount",
        "title": "Macide: Remove GitHub Account",
        "category": "Macide"
      },
      {
        "command": "macide.simulateRateLimit",
        "title": "Macide (Debug): Simulate Rate Limit",
        "category": "Macide"
      },
      {
        "command": "macide.resetUsageCounts",
        "title": "Macide (Debug): Reset Usage Counts",
        "category": "Macide"
      },
      {
        "command": "macide.toggleBlame",
        "title": "Macide: Toggle Blame Annotations",
        "category": "Macide"
      },
      {
        "command": "macide.clearBlame",
        "title": "Macide: Clear Blame Annotations",
        "category": "Macide"
      },
      {
        "command": "macide.conflict.keepOurs",
        "title": "Keep Ours (Current Branch)",
        "category": "Macide"
      },
      {
        "command": "macide.conflict.keepTheirs",
        "title": "Keep Theirs (Incoming)",
        "category": "Macide"
      },
      {
        "command": "macide.conflict.keepBoth",
        "title": "Keep Both Changes",
        "category": "Macide"
      },
      {
        "command": "macide.conflict.open3Way",
        "title": "Open 3-Way Diff",
        "category": "Macide"
      },
      {
        "command": "macide.openStashManager",
        "title": "Macide: Open Stash Manager",
        "category": "Macide"
      },
      {
        "command": "macide.checkCrossAccountRemote",
        "title": "Macide: Check Cross-Account Remote",
        "category": "Macide"
      },
      {
        "command": "macide.inlineDiff.accept",
        "title": "$(check) Accept AI Change",
        "category": "Macide"
      },
      {
        "command": "macide.inlineDiff.acceptLine",
        "title": "$(list-selection) Accept Current Line",
        "category": "Macide"
      },
      {
        "command": "macide.inlineDiff.reject",
        "title": "$(x) Reject AI Change",
        "category": "Macide"
      },
      {
        "command": "macide.inlineDiff.openDiffEditor",
        "title": "$(diff) Open in Diff Editor",
        "category": "Macide"
      },
      {
        "command": "macide.showInlineDiffActions",
        "title": "Macide: Review Inline AI Change",
        "category": "Macide"
      },
      {
        "command": "macide.reviewInlineChange",
        "title": "Macide: Mark Selection as AI Change",
        "category": "Macide"
      },
      {
        "command": "macide.pinToAiContext",
        "title": "$(pin) Pin to AI Context",
        "category": "Macide"
      },
      {
        "command": "macide.unpinFromAiContext",
        "title": "$(pinned-dirty) Remove Context Pin",
        "category": "Macide"
      },
      {
        "command": "macide.toggleContextPin",
        "title": "$(pin) Toggle Context Pin",
        "category": "Macide"
      },
      {
        "command": "macide.clearContextPins",
        "title": "$(clear-all) Clear All Context Pins",
        "category": "Macide"
      },
      {
        "command": "macide.copyContextPins",
        "title": "$(copy) Copy Context Pins to Clipboard",
        "category": "Macide"
      },
      {
        "command": "macide.openFloatingChat",
        "title": "$(comment-discussion) Open Macide AI Chat",
        "category": "Macide"
      },
      {
        "command": "macide.showContextSuggestions",
        "title": "$(zap) Show Context Suggestions",
        "category": "Macide"
      },
      {
        "command": "macide.openSettings",
        "title": "Macide: Open Settings",
        "category": "Macide"
      },
      {
        "command": "macide.checkForUpdates",
        "title": "Macide: Check for Updates",
        "category": "Macide"
      },
      {
        "command": "macide.applyUpdate",
        "title": "$(arrow-up) Install Macide Update",
        "category": "Macide"
      },
      {
        "command": "macide.dismissUpdate",
        "title": "Macide: Dismiss Update Notification",
        "category": "Macide"
      },
      {
        "command": "macide.showPerfReport",
        "title": "Macide (Debug): Show Performance Report",
        "category": "Macide"
      }
    ],
    "menus": {
      "editor/context": [
        {
          "command": "macide.pinToAiContext",
          "when": "editorFocus",
          "group": "macide@1"
        },
        {
          "command": "macide.reviewInlineChange",
          "when": "editorHasSelection",
          "group": "macide@2"
        }
      ],
      "view/item/context": [
        {
          "command": "macide.unpinFromAiContext",
          "when": "view == macide.contextPinsView && viewItem == contextPin",
          "group": "inline"
        },
        {
          "command": "macide.toggleContextPin",
          "when": "view == macide.contextPinsView && viewItem == contextPin",
          "group": "inline"
        }
      ],
      "view/title": [
        {
          "command": "macide.clearContextPins",
          "when": "view == macide.contextPinsView && macide.hasContextPins",
          "group": "navigation"
        },
        {
          "command": "macide.copyContextPins",
          "when": "view == macide.contextPinsView && macide.hasContextPins",
          "group": "navigation"
        }
      ]
    },
    "keybindings": [
      {
        "command": "macide.openAccountPanel",
        "key": "ctrl+shift+a",
        "mac": "cmd+shift+a"
      },
      {
        "command": "macide.openBranchSwitcher",
        "key": "ctrl+shift+b",
        "mac": "cmd+shift+b"
      },
      {
        "command": "macide.enterFlowMode",
        "key": "ctrl+.",
        "mac": "cmd+."
      },
      {
        "command": "macide.toggleFlowMode",
        "key": "ctrl+.",
        "mac": "cmd+."
      },
      {
        "command": "macide._exitFlowModeEscape",
        "key": "escape",
        "when": "macide.flowMode"
      },
      {
        "command": "macide.openGitHistory",
        "key": "ctrl+shift+g h",
        "mac": "cmd+shift+g h"
      },
      {
        "command": "macide.generateCommitMessage",
        "key": "ctrl+shift+m",
        "mac": "cmd+shift+m"
      },
      {
        "command": "macide.toggleBlame",
        "key": "ctrl+shift+g b",
        "mac": "cmd+shift+g b"
      },
      {
        "command": "macide.openStashManager",
        "key": "ctrl+shift+g s",
        "mac": "cmd+shift+g s"
      },
      {
        "command": "macide.openFloatingChat",
        "key": "ctrl+shift+c",
        "mac": "cmd+shift+c"
      },
      {
        "command": "macide.pinToAiContext",
        "key": "ctrl+shift+x",
        "mac": "cmd+shift+x",
        "when": "editorFocus"
      },
      {
        "command": "macide.showContextSuggestions",
        "key": "ctrl+shift+k",
        "mac": "cmd+shift+k"
      },
      {
        "command": "macide.openSettings",
        "key": "ctrl+,",
        "mac": "cmd+,"
      }
    ],
    "configuration": {
      "title": "Macide",
      "properties": {
        "macide.accounts.rotationStrategy": {
          "type": "string",
          "enum": ["round-robin", "least-used", "manual"],
          "default": "round-robin",
          "description": "Strategy used to auto-rotate GitHub Copilot accounts when rate limits are hit."
        },
        "macide.accounts.autoRotation": {
          "type": "boolean",
          "default": true,
          "description": "Automatically switch to the next account when the current one hits a rate limit."
        },
        "macide.accounts.assumedDailyLimit": {
          "type": "number",
          "default": 300,
          "minimum": 1,
          "description": "Assumed daily Copilot request limit per account (GitHub does not publish exact limits)."
        },
        "macide.git.inlineBlame": {
          "type": "string",
          "enum": ["current-line", "all-lines", "off"],
          "default": "current-line",
          "description": "Show inline Git blame annotations."
        },
        "macide.git.aiCommitMessages": {
          "type": "boolean",
          "default": true,
          "description": "Enable AI-assisted commit message generation using the active Copilot account."
        },
        "macide.git.credentialBridge": {
          "type": "boolean",
          "default": true,
          "description": "Automatically resolve Git HTTPS credentials from stored Macide accounts."
        },
        "macide.git.credentialMismatchBehavior": {
          "type": "string",
          "enum": ["warn", "auto-switch", "ignore"],
          "default": "warn",
          "description": "Action when the Git remote belongs to a different GitHub account than the active one."
        },
        "macide.git.commitFormat": {
          "type": "string",
          "enum": ["conventional", "freeform"],
          "default": "conventional",
          "description": "Default format for AI-generated commit messages."
        },
        "macide.appearance.animationSpeed": {
          "type": "string",
          "enum": ["normal", "fast", "off"],
          "default": "normal",
          "description": "Speed of UI animations. 'Off' disables all transitions."
        },
        "macide.appearance.glassmorphismIntensity": {
          "type": "number",
          "default": 100,
          "minimum": 0,
          "maximum": 100,
          "description": "Glassmorphism blur intensity for floating panels (0 = flat, 100 = full blur)."
        },
        "macide.appearance.accentColor": {
          "type": "string",
          "default": "#7c3aed",
          "description": "Primary accent color (hex) used for highlights and active states."
        },
        "macide.appearance.editorFontFamily": {
          "type": "string",
          "default": "Geist Mono",
          "description": "Monospace font family used in the code editor (mirrors editor.fontFamily)."
        },
        "macide.appearance.editorFontSize": {
          "type": "number",
          "default": 13,
          "minimum": 8,
          "maximum": 32,
          "description": "Editor font size in pixels (mirrors editor.fontSize)."
        },
        "macide.appearance.vignetteIntensity": {
          "type": "number",
          "default": 30,
          "minimum": 0,
          "maximum": 100,
          "description": "Intensity of the subtle edge vignette applied to the editor area."
        },
        "macide.githubClientId": {
          "type": "string",
          "default": "",
          "description": "GitHub OAuth App Client ID used for the Device Flow authorization. Register an app at https://github.com/settings/developers (no callback URL needed for Device Flow). Can also be set via the MACIDE_GITHUB_CLIENT_ID environment variable."
        },
        "macide.updates.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Automatically check for Macide updates on launch and every 24 hours."
        },
        "macide.updates.githubOwner": {
          "type": "string",
          "default": "macide-app",
          "description": "GitHub organisation or user that owns the Macide release repository."
        },
        "macide.updates.githubRepo": {
          "type": "string",
          "default": "macide",
          "description": "GitHub repository name where Macide releases are published."
        }
      }
    }
  },
  "scripts": {
    "compile": "tsc -p tsconfig.json",
    "watch": "tsc -watch -p tsconfig.json"
  },
  "devDependencies": {
    "@types/vscode": "*",
    "@types/node": "*",
    "typescript": "^5.0.0"
  }
}
